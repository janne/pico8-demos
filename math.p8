pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
function new_task()
	selected=0
	answer=""
	op="+"
	if(flr(rnd(2))==0) then
		op="-"
		num1=flr(rnd(5))+10
		num2=flr(rnd(num1))
		right_answer=num1-num2
	else
		num1=flr(rnd(14))
		local from=max(10-num1,0)
		local r
		r=14-from-num1+1
		num2=flr(rnd(r))+from
		right_answer=num1+num2
	end
		printh(num1..op..num2)
	return {num1=num1,num2=num2,op=op}
end

function _init()
end

function _update()
	if (not task) then
		if btnp(❎) or btnp(🅾️) then
			task=new_task()
		end
		return
	end
	if (btnp(⬅️)) selected=(selected-1)%10
	if (btnp(➡️)) selected=(selected+1)%10
	if (btnp(❎) or btnp(🅾️)) then
		answer=answer..selected
	end
	if answer==""..right_answer then
		sfx(0)
		task=new_task()
	elseif #answer==2 then
		sfx(1)
		task=new_task()
	end
end

function start_screen()
	cls()
	music(0)
	print("press ❎ or 🅾️ to start",20,64)
end

function _draw()
	if (not task) then
		start_screen()
		return
	end
	cls()
	print(task.num1,50,30,task.num1+1)
	local col=task.op=="+" and 11 or 8
	print(task.op,64,30,col)
	print(task.num2,78,30,task.num2+1)
	for i=1,10 do
		pal(7,i)
		spr(i,i*11,100)
	end
	pal()
	rect((selected+1)*11-1,98,(selected+1)*11+8,109,7)
	if answer then
		print(answer,64,50)
	end
end
__gfx__
00000000007777000007700000777700077777700000077007777700007777000777777000777700007777000000000000000000000000000000000000000000
00000000077007700077700007700770000007700000770007700000077000000000077007700770077007700000000000000000000000000000000000000000
00700700077007700007700007000770000007700007700007700000077000000000770007700770077007700000000000000000000000000000000000000000
00077000077077700007700000000770000070000077000007777700077777000007700000777700077007700000000000000000000000000000000000000000
00077000077707700007700000077700000777000770077000000770077007700007700007700770007777700000000000000000000000000000000000000000
00700700077007700007700000770000070007700777777000000770077007700007700007700770000007700000000000000000000000000000000000000000
00000000077007700007700007700000070007700000077007700770077007700007700007700770077007700000000000000000000000000000000000000000
00000000007777000077770007777770007777000000077000777700007777000007700000777700007777000000000000000000000000000000000000000000
__sfx__
01040000160411604116041160411604116041150012f0412f0412f0412f0412f0412f0412f0012f0012f0012f0012f0012f0012e001000010000100001000010000100001000010000100001000010000100001
010b00001c4321c4321c4321c4321a4321a4321a4321a432184321843218432184321843218432184321843200402004020040200402004020040200402004020040200402004020040200402004020040200402
